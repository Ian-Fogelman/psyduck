#pragma once
#include "psyduck_extension.hpp"
#include <unordered_map>
#include <string>

namespace duckdb {

enum class Type {
    Bug, Dark, Dragon, Electric, Fighting, Fire, Flying,
    Ghost, Grass, Ground, Ice, Normal, Poison, Psychic,
    Rock, Steel, Water
};

// 2D array: [attacking type][defending type] = effectiveness
constexpr float TYPE_CHART[17][17] = {
    // Def:  Bug  Drk  Dra  Ele  Fig  Fir  Fly  Gho  Gra  Gro  Ice  Nor  Poi  Psy  Rck  Ste  Wat
    /*Bug*/ {1.0, 2.0, 1.0, 1.0, 0.5, 0.5, 0.5, 0.5, 2.0, 1.0, 1.0, 1.0, 0.5, 2.0, 1.0, 0.5, 1.0},
    /*Drk*/ {1.0, 0.5, 1.0, 1.0, 0.5, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 0.5, 1.0},
    /*Dra*/ {1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5, 1.0},
    /*Ele*/ {1.0, 1.0, 0.5, 0.5, 1.0, 1.0, 2.0, 1.0, 0.5, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0},
    /*Fig*/ {0.5, 2.0, 1.0, 1.0, 1.0, 1.0, 0.5, 0.0, 1.0, 1.0, 2.0, 2.0, 0.5, 0.5, 2.0, 2.0, 1.0},
    /*Fir*/ {2.0, 1.0, 0.5, 1.0, 1.0, 0.5, 1.0, 1.0, 2.0, 1.0, 2.0, 1.0, 1.0, 1.0, 0.5, 2.0, 0.5},
    /*Fly*/ {2.0, 1.0, 1.0, 0.5, 2.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5, 0.5, 1.0},
    /*Gho*/ {1.0, 0.5, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 0.0, 1.0, 2.0, 1.0, 0.5, 1.0},
    /*Gra*/ {0.5, 1.0, 0.5, 1.0, 1.0, 0.5, 0.5, 1.0, 0.5, 2.0, 1.0, 1.0, 0.5, 1.0, 2.0, 0.5, 2.0},
    /*Gro*/ {0.5, 1.0, 1.0, 2.0, 1.0, 2.0, 0.0, 1.0, 0.5, 1.0, 1.0, 1.0, 2.0, 1.0, 2.0, 2.0, 1.0},
    /*Ice*/ {1.0, 1.0, 2.0, 1.0, 1.0, 0.5, 2.0, 1.0, 2.0, 2.0, 0.5, 1.0, 1.0, 1.0, 1.0, 0.5, 0.5},
    /*Nor*/ {1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5, 0.5, 1.0},
    /*Poi*/ {1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.5, 2.0, 0.5, 1.0, 1.0, 0.5, 1.0, 0.5, 0.0, 1.0},
    /*Psy*/ {1.0, 0.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 0.5, 1.0, 0.5, 1.0},
    /*Rck*/ {2.0, 1.0, 1.0, 1.0, 0.5, 2.0, 2.0, 1.0, 1.0, 0.5, 2.0, 1.0, 1.0, 1.0, 1.0, 0.5, 1.0},
    /*Ste*/ {1.0, 1.0, 1.0, 0.5, 1.0, 0.5, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 1.0, 2.0, 0.5, 0.5},
    /*Wat*/ {1.0, 1.0, 0.5, 1.0, 1.0, 2.0, 1.0, 1.0, 0.5, 2.0, 1.0, 1.0, 1.0, 1.0, 2.0, 1.0, 0.5}
};

float getEffectiveness(Type attacker, Type defender) {
    return TYPE_CHART[static_cast<int>(attacker)][static_cast<int>(defender)];
}
// getEffectiveness(Bug, Dragon)

}